{"version":3,"sources":["context/gnomes/GnomesState.js","context/gnomes/GnomesContext.js","components/Header/Header.js","context/gnomes/GnomesActions.js","components/Card/Card.js","pages/Home/Home.js","components/ExtendedCard/ExtendedCard.js","pages/GnomeDetail/GnomeDetail.js","pages/NoMatch/NoMatch.js","context/gnomes/GnomesReducer.js","context/gnomes/GnomesProvider.js","hooks/useFetch.js","context/error/ErrorContext.js","context/error/ErrorState.js","context/error/ErrorProvider.js","index.js","context/index.js","App.js"],"names":["gnomes","filter","loading","error","status","message","createContext","GnomesState","useState","searchInput","state","setState","useContext","GnomesContext","gnomesState","gnomesDispatch","React","useEffect","type","payload","strFilter","str","filtered","length","gnome","name","trim","toLowerCase","includes","placeholder","className","value","onChange","event","target","props","style","src","thumbnail","alt","age","weight","toFixed","to","pathname","id","Object","entries","printData","index","key","Card","Header","prop","width","height","rowHeight","rowRenderer","rowCount","overscanRowCount","hair_color","friends","map","friend","i","gnomeFriend","replace","professions","profession","library","add","faAngleLeft","undefined","location","icon","ExtendedCard","action","useReducer","GnomesReducer","dispatch","url","options","data","setData","setLoading","setError","a","fetch","response","json","useFetch","gnomesLoading","gnomesError","Brastlewark","Provider","children","isError","ErrorContext","ReactDOM","render","GnomesProvider","ErrorProvider","exact","path","component","Home","GnomeDetail","NoMatch","document","getElementById"],"mappings":"6ZAAe,GACXA,OAAQ,GACRC,OAAQ,GACRC,SAAS,EACTC,MAAO,CACHC,QAAQ,EACRC,QAAS,KCFFC,0BAAcC,GCEd,G,OAAA,WAAO,IAAD,EACOC,mBAAS,CAAEC,YAAa,KAD/B,mBACZC,EADY,KACLC,EADK,OAEmBC,qBAAWC,GAF9B,mBAEZC,EAFY,KAECC,EAFD,KAInBC,IAAMC,UAAU,WACd,OAAO,kBAAMF,EAAe,CAAEG,KCTL,gBDSsCC,QAASL,EAAYd,WAEnF,IAEH,IAOMoB,EAAY,SAAAC,GAChB,IAAMC,EAAWD,EAAIE,OAAS,EAC5BT,EAAYd,OAAOC,OAAO,SAAAuB,GAAK,OAAIA,EAAMC,KAAKC,OAAOC,cAAcC,SAASP,EAAIK,OAAOC,iBAEvFb,EAAYd,OAEde,EAAe,CAAEG,KC1BQ,gBD0ByBC,QAASG,KAG7D,OACE,gCACE,2CACA,8LACA,2BAAOO,YAAY,WAAWC,UAAU,eAAeL,KAAK,cAAcP,KAAK,OAAOa,MAAOrB,EAAMD,YAAauB,SApB/F,SAAAC,GACnBb,EAAUa,EAAMC,OAAOH,OACvBpB,EAAS,eACNsB,EAAMC,OAAOT,KAAOQ,EAAMC,OAAOH,cEbzB,G,OAAA,SAAAI,GAAU,IACfX,EAAiBW,EAAjBX,MAAOY,EAAUD,EAAVC,MAEf,OACE,yBAAKN,UAAU,OAAOM,MAAOA,GAC3B,yBAAKN,UAAU,aAEb,yBAAKA,UAAU,mBACb,yBAAKO,IAAKb,EAAMc,UAAWC,IAAKf,EAAMC,QAGxC,yBAAKK,UAAU,aACb,4BAAKN,EAAMC,MACX,2BAAID,EAAMgB,IAAV,cACA,2BAAIhB,EAAMiB,OAAOC,QAAQ,GAAzB,MACA,kBAAC,IAAD,CAAMC,GAAI,CACRC,SAAS,UAAD,OAAYpB,EAAMqB,IAC1BrB,UAFF,gBCPK,G,OAAA,WAAO,IAAD,EACGZ,qBAAWC,GAA1BC,EADY,oBAGnB,GAAIA,EAAYX,MAAMC,OAAQ,OAAO,kBAAC,IAAD,CAAUuC,GAAG,aAClD,GAAI7B,EAAYZ,SAAyD,IAA9C4C,OAAOC,QAAQjC,EAAYd,QAAQuB,OAAc,OAAO,yCAEnF,IAAMyB,EAAY,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,IAAKd,EAAf,EAAeA,MAAf,OAA2B,kBAACe,EAAD,CAAMf,MAAOA,EAAOZ,MAAOV,EAAYb,OAAOgD,GAAQC,IAAKA,KAExG,OACE,oCACE,kBAACE,EAAD,MAEA,yBAAKtB,UAAU,aACb,kBAAC,IAAD,KACG,SAACuB,GACA,OAAO,kBAAC,IAAD,CACLC,MAAOD,EAAKC,MACZC,OAAQF,EAAKE,OACbC,UArBK,IAsBLC,YAAaT,EACbU,SAAU5C,EAAYb,OAAOsB,OAC7BoC,iBAvBa,WCLZ,G,OAAA,SAAAxB,GAAU,IAAD,EACAvB,qBAAWC,GAA1BC,EADe,oBAEdU,EAAUW,EAAVX,MAcR,OACE,yBAAKM,UAAU,iBAEb,yBAAKA,UAAU,sBACb,yBAAKA,UAAU,4BACb,yBAAKO,IAAKb,EAAMc,UAAWC,IAAKf,EAAMC,QAExC,yBAAKK,UAAU,sBACb,4BAAKN,EAAMC,MACX,2BAAID,EAAMgB,IAAV,cACA,2BAAIhB,EAAMiB,OAAOC,QAAQ,GAAzB,MACA,2BAAIlB,EAAM+B,OAAOb,QAAQ,GAAzB,MACA,0CAAgBlB,EAAMoC,YACrBpC,EAAMqC,QAAQtC,OAAS,GAAK,uCApBZC,EAAMqC,QAAQC,IAAI,SAACC,EAAQC,GAClD,IANgBvC,EAMVwC,GANUxC,EAMcsC,EALfjD,EAAYd,OAAOC,OAAO,SAAAuB,GAAK,OAAIA,EAAMC,KAAKC,OAAOC,cAAcC,SAASH,EAAKC,OAAOC,cAAcuC,QAAQ,IAAK,OACpH,IAKd,OAAO,kBAAC,IAAD,CAAMhB,IAAKc,EAAGrB,GAAI,CAAEC,SAAS,UAAD,OAAYqB,EAAYpB,IAAMrB,MAAOyC,IAAjE,UAAoFF,GAApF,OAA6FvC,EAAMqC,QAAQtC,OAASyC,EAAI,EAA3B,aAmB7FxC,EAAM2C,YAAY5C,OAAS,GAAK,0CAhBZC,EAAM2C,YAAYL,IAAI,SAACM,EAAYJ,GAAb,gBAAsBI,GAAtB,OAAmC5C,EAAM2C,YAAY5C,OAASyC,EAAI,EAA/B,iB,iCCTxFK,IAAQC,IAAIC,KAEG,eAAApC,GACb,IAAMX,OAAiCgD,IAAzBrC,EAAMsC,SAASjD,MAAsBW,EAAMsC,SAASjD,WAAQgD,EAE1E,YAAiBA,IAAVhD,EACL,kBAAC,IAAD,CAAUmB,GAAG,MAEb,yBAAKb,UAAU,gBACb,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CAAMa,GAAG,KAAI,kBAAC,IAAD,CAAiB+B,KAAK,eAAnC,aAEF,kBAACC,EAAD,CAAcnD,MAAOA,M,OChB3B6C,IAAQC,IAAIC,KAEG,iBAEb,OACE,yBAAKzC,UAAU,gBACb,kBAAC,IAAD,CAAMA,UAAU,eAAea,GAAG,KAAI,kBAAC,IAAD,CAAiB+B,KAAK,eAA5D,YACA,wBAAI5C,UAAU,cAAd,0B,mjBCZS,eAACpB,EAAOkE,GAAY,IACvB1D,EAAkB0D,EAAlB1D,KAAMC,EAAYyD,EAAZzD,QAEd,OAAQD,GACJ,INNqB,gBMOjB,OAAO,EAAP,GACOR,EADP,CAEIV,OAAQmB,EACRlB,OAAQkB,IAIhB,INbqB,gBMcjB,OAAO,EAAP,GACOT,EADP,CAEIP,MAAM,EAAD,GACEgB,KAKf,INrBqB,gBMsBjB,OAAO,EAAP,GACOT,EADP,CAEIT,OAAQkB,IAIhB,IN3BsB,iBM4BlB,OAAO,EAAP,GACOT,EADP,CAEIR,QAASiB,IAIjB,QACI,OAAOT,I,0BC9BJ,WAAAyB,GAAU,IAAD,EACM0C,qBAAWC,EAAevE,GADhC,mBACbG,EADa,KACNqE,EADM,OCJT,SAACC,GAAuB,IAAlBC,EAAiB,uDAAP,GAAO,EACVzE,mBAAS,IADC,mBAC3B0E,EAD2B,KACrBC,EADqB,OAEJ3E,oBAAS,GAFL,mBAE3BN,EAF2B,KAElBkF,EAFkB,OAGR5E,mBAAS,CAAEJ,QAAQ,EAAOC,QAAS,KAH3B,mBAG3BF,EAH2B,KAGpBkF,EAHoB,KAoBlC,OAfApE,oBAAU,WACN,qBAAC,8BAAAqE,EAAA,4DACGF,GAAW,GADd,kBAG8BG,MAAMP,EAAKC,GAHzC,cAGaO,EAHb,gBAI0BA,EAASC,OAJnC,OAIaA,EAJb,OAKON,EAAQM,GACRL,GAAW,GANlB,kDAQOC,EAAS,CAAEjF,QAAQ,EAAMC,QAAS,KAAMA,UACxC+E,GAAW,GATlB,uDAAD,IAaD,IACI,CAACF,EAAMhF,EAASC,GDdsBuF,CAAS,0EAFlC,mBAEb1F,EAFa,KAEL2F,EAFK,KAEUC,EAFV,KAgBpB,OAZA3E,oBAAU,WACgC,IAAlC6B,OAAOC,QAAQ/C,GAAQuB,QAAcwD,EAAS,CAAE7D,KPb/B,gBOagEC,QAASnB,EAAO6F,eACtG,CAAC7F,IAEJiB,oBAAU,WACN8D,EAAS,CAAE7D,KPdW,iBOcuBC,QAASwE,KACvD,CAACA,IAEJ1E,oBAAU,WACN8D,EAAS,CAAE7D,KPpBU,gBOoBuBC,QAASyE,KACtD,CAACA,IAGA,kBAAC/E,EAAciF,SAAf,CAAwB/D,MAAO,CAACrB,EAAOqE,IAClC5C,EAAM4D,WEtBJzF,0BCJA,CACX0F,SAAS,EACT3F,QAAS,KCEE,WAAA8B,GAEX,OACI,kBAAC8D,EAAaH,SAAd,CAAuB/D,MAAO,gBACzBI,EAAM4D,WCFnBG,IAASC,OACL,kBCFW,SAAAhE,GAAK,OAChB,kBAACiE,EAAD,KACI,kBAACC,EAAD,KACKlE,EAAM4D,YDDf,KACI,kBEEO,WAEb,OACE,kBAAC,IAAD,KAEE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOO,OAAK,EAACC,KAAK,IAAIC,UAAWC,IACjC,kBAAC,IAAD,CAAOH,OAAK,EAACC,KAAK,aAAaC,UAAWE,IAC1C,kBAAC,IAAD,CAAOJ,OAAK,EAACC,KAAK,IAAIC,UAAWG,OFVjC,OACiBC,SAASC,eAAe,W","file":"static/js/main.b88fbdb7.chunk.js","sourcesContent":["export default {\n    gnomes: [],\n    filter: [],\n    loading: false,\n    error: {\n        status: false,\n        message: '',\n    }\n}\n","import { createContext } from 'react';\n\nimport GnomesState from './GnomesState';\n\nexport default createContext(GnomesState);","import React, { useState, useContext } from 'react';\n\nimport GnomesContext from '../../context/gnomes/GnomesContext';\nimport * as actionTypes from '../../context/gnomes/GnomesActions';\nimport './header.css';\n\nexport default () => {\n  const [state, setState] = useState({ searchInput: '' });\n  const [gnomesState, gnomesDispatch] = useContext(GnomesContext);\n\n  React.useEffect(() => {\n    return () => gnomesDispatch({ type: actionTypes.UPLOAD_FILTER, payload: gnomesState.gnomes });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const inputHandler = event => {\n    strFilter(event.target.value);\n    setState({\n      [event.target.name]: event.target.value,\n    });\n  }\n\n  const strFilter = str => {\n    const filtered = str.length > 0 ?\n      gnomesState.gnomes.filter(gnome => gnome.name.trim().toLowerCase().includes(str.trim().toLowerCase()))\n      :\n      gnomesState.gnomes;\n\n    gnomesDispatch({ type: actionTypes.UPLOAD_FILTER, payload: filtered });\n  }\n\n  return (\n    <header>\n      <h1>Brastlewark</h1>\n      <h5>Brastlewark is an almost exclusively gnomish city in eastern Cheliax, located on the western edge of the Aspodell Mountains, at the head of the Brastle River.</h5>\n      <input placeholder=\"Search..\" className=\"header-input\" name=\"searchInput\" type=\"text\" value={state.searchInput} onChange={inputHandler} />\n    </header>\n  );\n\n}\n","export const UPLOAD_GNOMES = 'UPLOAD_GNOMES';\nexport const UPLOAD_ERRORS = 'UPLOAD_ERRORS';\nexport const UPLOAD_FILTER = 'UPLOAD_FILTER';\nexport const UPLOAD_LOADING = 'UPLOAD_LOADING';","import React from 'react';\nimport { Link } from \"react-router-dom\";\n\nimport './card.css';\n\nexport default props => {\n  const { gnome, style } = props;\n\n  return (\n    <div className=\"card\" style={style}>\n      <div className=\"card-wrap\">\n\n        <div className=\"card-image-wrap\">\n          <img src={gnome.thumbnail} alt={gnome.name} />\n        </div>\n\n        <div className=\"card-info\">\n          <h2>{gnome.name}</h2>\n          <p>{gnome.age} years old</p>\n          <p>{gnome.weight.toFixed(1)}kg</p>\n          <Link to={{\n            pathname: `/gnome/${gnome.id}`,\n            gnome,\n          }}>Details</Link>\n        </div>\n        \n      </div>\n    </div>\n  );\n\n}\n","import React, { useContext } from 'react';\nimport { List as VList, AutoSizer } from \"react-virtualized\";\nimport { Redirect } from 'react-router-dom';\n\nimport Header from '../../components/Header/Header';\nimport Card from '../../components/Card/Card';\nimport GnomesContext from '../../context/gnomes/GnomesContext';\nimport './home.css';\n\n// Virtualization constants\nconst ROW_HEIGHT = 450;\nconst OVERSCAN_ROW_COUNT = 10;\n\nexport default () => {\n  const [gnomesState] = useContext(GnomesContext);\n\n  if (gnomesState.error.status) return <Redirect to=\"/NoMatch\" />;\n  if (gnomesState.loading || Object.entries(gnomesState.gnomes).length === 0) return <p>Loading...</p>\n\n  const printData = ({ index, key, style }) => <Card style={style} gnome={gnomesState.filter[index]} key={key} />;\n\n  return (\n    <>\n      <Header />\n\n      <div className=\"list-wrap\">\n        <AutoSizer>\n          {(prop) => {\n            return <VList\n              width={prop.width}\n              height={prop.height}\n              rowHeight={ROW_HEIGHT}\n              rowRenderer={printData}\n              rowCount={gnomesState.filter.length}\n              overscanRowCount={OVERSCAN_ROW_COUNT} />\n          }}\n        </AutoSizer>\n      </div>\n\n    </>\n  );\n}\n","import React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport GnomesContext from '../../context/gnomes/GnomesContext';\nimport './extendedCard.css';\n\nexport default props => {\n  const [gnomesState] = useContext(GnomesContext);\n  const { gnome } = props;\n\n  const getByName = name => {\n    const filter = gnomesState.gnomes.filter(gnome => gnome.name.trim().toLowerCase().includes(name.trim().toLowerCase().replace(',', '')));\n    return filter[0];\n  }\n\n  const getFriends = () => gnome.friends.map((friend, i) => {\n    const gnomeFriend = getByName(friend);\n    return <Link key={i} to={{ pathname: `/gnome/${gnomeFriend.id}`, gnome: gnomeFriend }}>{`${friend}${gnome.friends.length > i + 1 ? `, ` : ``}`}</Link>\n  });\n\n  const getProfessions = () => gnome.professions.map((profession, i) => `${profession}${gnome.professions.length > i + 1 ? `, ` : ``}`);\n\n  return (\n    <div className=\"extended-card\">\n\n      <div className=\"extended-card-wrap\">\n        <div className=\"extended-card-image-wrap\">\n          <img src={gnome.thumbnail} alt={gnome.name} />\n        </div>\n        <div className=\"extended-card-info\">\n          <h2>{gnome.name}</h2>\n          <p>{gnome.age} years old</p>\n          <p>{gnome.weight.toFixed(1)}kg</p>\n          <p>{gnome.height.toFixed(1)}cm</p>\n          <p>Hair color: {gnome.hair_color}</p>\n          {gnome.friends.length > 0 && <p>Friends: {getFriends()}</p>}\n          {gnome.professions.length > 0 && <p>Profession: {getProfessions()}</p>}\n        </div>\n      </div>\n    </div>\n  );\n\n}\n","import React from 'react';\nimport { Link } from \"react-router-dom\";\nimport { Redirect } from 'react-router';\n\nimport ExtendedCard from '../../components/ExtendedCard/ExtendedCard';\n\nimport './gnomeDetail.css';\n\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleLeft } from '@fortawesome/free-solid-svg-icons';\nlibrary.add(faAngleLeft);\n\nexport default props => {\n  const gnome = props.location.gnome !== undefined ? props.location.gnome : undefined;\n\n  return gnome === undefined ?\n    <Redirect to='/' />\n    :\n    <div className=\"gnome-detail\">\n      <div className=\"gnome-detail-back\">\n        <Link to=\"/\"><FontAwesomeIcon icon=\"angle-left\" /> Go back</Link>\n      </div>\n      <ExtendedCard gnome={gnome} />\n    </div>\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom'\n\nimport './noMatch.css';\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faAngleLeft } from '@fortawesome/free-solid-svg-icons'\nlibrary.add(faAngleLeft)\n\nexport default () => {\n\n  return (\n    <div className=\"nomatch-wrap\">\n      <Link className=\"nomatch-link\" to=\"/\"><FontAwesomeIcon icon=\"angle-left\" /> Go back</Link>\n      <h1 className=\"nomatch-h1\">Something went wrong</h1>\n    </div>\n  );\n\n}\n","import * as actionTypes from './GnomesActions';\n\nexport default (state, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case actionTypes.UPLOAD_GNOMES: {\n            return {\n                ...state,\n                gnomes: payload,\n                filter: payload,\n            }\n        }\n\n        case actionTypes.UPLOAD_ERRORS: {\n            return {\n                ...state,\n                error: {\n                    ...payload,\n                }\n            }\n        }\n\n        case actionTypes.UPLOAD_FILTER: {\n            return {\n                ...state,\n                filter: payload,\n            }\n        }\n\n        case actionTypes.UPLOAD_LOADING: {\n            return {\n                ...state,\n                loading: payload,\n            }\n        }\n\n        default: {\n            return state;\n        }\n    }\n\n}\n","import React, { useReducer, useEffect } from 'react';\n\nimport GnomesState from './GnomesState';\nimport GnomesReducer from './GnomesReducer';\nimport GnomesContext from './GnomesContext';\nimport * as actionTypes from './GnomesActions';\nimport useFetch from '../../hooks/useFetch';\n\nexport default props => {\n    const [state, dispatch] = useReducer(GnomesReducer, GnomesState);\n    const [gnomes, gnomesLoading, gnomesError] = useFetch('https://raw.githubusercontent.com/rrafols/mobile_test/master/data.json');\n\n    useEffect(() => {\n        if (Object.entries(gnomes).length !== 0) dispatch({ type: actionTypes.UPLOAD_GNOMES, payload: gnomes.Brastlewark });\n    }, [gnomes]);\n\n    useEffect(() => {\n        dispatch({ type: actionTypes.UPLOAD_LOADING, payload: gnomesLoading });\n    }, [gnomesLoading]);\n\n    useEffect(() => {\n        dispatch({ type: actionTypes.UPLOAD_ERRORS, payload: gnomesError });\n    }, [gnomesError]);\n\n    return (\n        <GnomesContext.Provider value={[state, dispatch]}>\n            {props.children}\n        </GnomesContext.Provider>\n    );\n\n}\n","// https://github.com/franlol/useFetch/\n\nimport { useState, useEffect } from 'react';\n\nexport default (url, options = {}) => {\n    const [data, setData] = useState({});\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState({ status: false, message: '' });\n\n    useEffect(() => {\n        (async () => {\n            setLoading(true);\n            try {\n                const response = await fetch(url, options);\n                const json = await response.json();\n                setData(json);\n                setLoading(false);\n            } catch (error) {\n                setError({ status: true, message: error.message });\n                setLoading(false);\n            }\n        })();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    return [data, loading, error];\n}\n","import {createContext} from 'react';\n\nimport ErrorState from './ErrorState';\n\nexport default createContext(ErrorState);","export default {\n    isError: false,\n    message: '',\n}\n","import React from 'react';\n\nimport ErrorContext from './ErrorContext';\n\nexport default props => {\n\n    return (\n        <ErrorContext.Provider value={\"errorcontext\"}>\n            {props.children}\n        </ErrorContext.Provider>\n    );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport ContextProviders from './context';\n\nReactDOM.render(\n    <ContextProviders>\n        <App />\n    </ContextProviders>, document.getElementById('root'));\n","import React from 'react';\n\nimport GnomesProvider from './gnomes/GnomesProvider';\nimport ErrorProvider from './error/ErrorProvider';\n\nexport default props => (\n    <GnomesProvider>\n        <ErrorProvider>\n            {props.children}\n        </ErrorProvider>\n    </GnomesProvider>\n);\n","import React from 'react';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport { Switch } from 'react-router';\n\nimport './App.css';\n\nimport Home from './pages/Home/Home';\nimport GnomeDetail from './pages/GnomeDetail/GnomeDetail';\nimport NoMatch from './pages/NoMatch/NoMatch';\n\nexport default () => {\n\n  return (\n    <Router>\n\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/gnome/:id\" component={GnomeDetail} />\n        <Route exact path=\"*\" component={NoMatch} />\n      </Switch>\n\n    </Router>\n  );\n  \n}\n"],"sourceRoot":""}